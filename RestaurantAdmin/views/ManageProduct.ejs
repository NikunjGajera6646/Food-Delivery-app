<html lang="en">

<head>
    <%- include('./partials/header.ejs'); %>
    <style>
        .overflowset {
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            max-width: 150px;
          }
      </style>
        <title>Document</title>
</head>

<body>
    <%- include('./partials/sidebar.ejs'); %>
    <%- include('./partials/navbar.ejs'); %>

        <div class='dashboard-app'>
            <!-- <header class='dashboard-toolbar'><a href="#!" class="menu-toggle"><i class="fas fa-bars"></i></a></header> -->

            <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
                <%if(message.length) { %>
                    <div class="alert alert-success" id="alert">
                        <%=message%>
                            <!-- <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert"
                            aria-label="Close"></button> -->
                    </div>
                    <%}%>
                        <div class="row m-0">
                            <div class="col-12">
                                <div class="card my-4">
                                    <div class="card-header p-0 ">
                                        <div class="shadow-primary  pt-4 pb-3" style="background-color: blue">
                                            <h4 class="text-white text-capitalize ps-3">Display Products:</h4>
                                        </div>
                                    </div>

                                    <div class="card mt-4 shadow-lg">
                                        <table class="table m-0">
                                            <thead class="table text-white" style="background-color: blue;">
                                                <tr>
                                                    <th class="text-center">img</th>
                                                    <th class="text-center">Item Name</th>
                                                    <th class="text-center">category</th>
                                                    <th class="text-center">Itemtype</th>
                                                    <th class="text-center">Price</th>
                                                    <th class="text-center">Des</th>
                                                    <th class="text-center">Edit</th>
                                                    <th class="text-center">Delete</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <% if(item.length) { %>
                                                    <% for(let P of item) { %>

                                                        <tr class="align-middle">
                                                            <td class="text-center">
                                                                <img src="/<%= P.img %>" alt="Not Found"
                                                                    style="width: 100px; height: 50px; margin: 5px auto;">
                                                            </td>
                                                            <td class="text-center overflowset">
                                                                <%= P.itemname %>
                                                            </td>
                                                            <td class="text-center">
                                                                <%= P.category%>
                                                            </td>
                                                            <td class="text-center">
                                                                <%= P.itemtype %>
                                                            </td>
                                                            <td class="text-center">
                                                                <%= P.price%>
                                                            </td>
                                                            <td class="text-center overflowset">
                                                                <%= P.description%>
                                                            </td>

                                                            <td class="text-center ">
                                                                <a href="Updateproduct/<%= P._id %>"
                                                                    class="text-decoration-none text-black">
                                                                    <i
                                                                        class=" material-icons opacity-10 d-flex justify-content-center">edit_calendar</i>
                                                                </a>

                                                            </td>
                                                            <td class="text-center">
                                                                <form action="/deleteproduct" method="get">
                                                                    <a href="deleteproduct/<%= P._id %>"
                                                                        class="text-decoration-none text-black">
                                                                        <i
                                                                            class=" material-icons opacity-10 d-flex justify-content-center">delete</i>
                                                                    </a>
                                                                </form>
                                                            </td>
                                                        </tr>
                                                        <% } %>
                                                            <% } %>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
            </main>
            <script>
                const message = `<%= message %>`
                console.log("jdhej", message)
                if (message.length) {
                    setTimeout(() => {
                        var alertNode = document.querySelector('#alert')
                        alertNode.remove()
                    }, 2000);
                }
            </script>
        </div>
</body>

</html>